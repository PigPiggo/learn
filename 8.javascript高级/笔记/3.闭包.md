## 闭包
1. 什么是闭包：
    - 函数跨作用域访问变量就会形成闭包，闭包是一种'作用域'的体现；
    - 把变量隐藏在函数中，变成私有变量（局部变量），外部访问不到，但是可以通过函数的子函数，将变量返回出去；
    - 常见闭包写法都是函数嵌套子函数，把子函数返回或者挂在window上；
2. 闭包的作用：
    - 很多时候，我们需要把变量变为私有（局部变量），这样外部就不能访问，比较安全；可以通过对外暴露接口的方法，别人通过我们暴露的接口方法，可以访问，这就是闭包常用的功能；
    - 优点：私有化变量（把变量隐藏在函数作用域中，外部不能访问，减少全局污染，比较安全）；
    - 缺点：闭包会延迟甚至永久不被js垃圾回收机制回收，可能造成大的内存开销甚至泄露；
3. 闭包的写法
- 写法一：
```
(function () {
    var num = 100;
    window.getNum = function(){
        return num;
    }
})
```
- 写法二(推荐)：
```
var getNum =  (function () {
    var num = 100;
    return function () {
        return num;
    }
})()
```
- 练习原理
    - 闭包解决循环定时器问题：
        - 前提：setTimeout是异步的，会在for循环执行完毕之后再执行setTimeout中的回调函数；所以导致打印出来的参数全部都是当循环结束之后的值；
        - 使用闭包使得每一个循环都产生在一个单独的局部作用域中，所以不论延迟多久，打印出来的索引都是当前作用域中的索引；
        - 使用let效果一样，使得每一个i都保存在一个单独的作用域中；